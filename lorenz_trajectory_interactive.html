<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>                        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.1.0.min.js" integrity="sha256-Ei4740bWZhaUTQuD6q9yQlgVCMPBz6CZWhevDYPv93A=" crossorigin="anonymous"></script>                <div id="c0558866-21fe-4a20-a176-a49e1d0b05c2" class="plotly-graph-div" style="height:900px; width:1400px;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("c0558866-21fe-4a20-a176-a49e1d0b05c2")) {                    Plotly.newPlot(                        "c0558866-21fe-4a20-a176-a49e1d0b05c2",                        [{"hoverinfo":"skip","line":{"color":"rgba(0,0,0,0.35)","dash":"dash","width":0.8},"mode":"lines","name":"Equality","showlegend":false,"x":[0,1],"y":[0,1],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"annotations":[{"font":{"color":"rgba(100,100,100,0.6)","size":16},"name":"guide_text","showarrow":false,"text":"\u003cb\u003e\ud83d\udc48 \uc6b0\uce21 \ud328\ub110\uc5d0\uc11c \uad6c\ub97c \uc120\ud0dd\ud558\uc138\uc694\u003c\u002fb\u003e\u003cbr\u003e\uc120\ud0dd\ub41c \uad6c\uc758 \uada4\uc801\ub9cc \ud45c\uc2dc\ub429\ub2c8\ub2e4","x":0.5,"xref":"x","y":0.5,"yref":"y"}],"xaxis":{"title":{"text":"\ub204\uc801 \uad6c \ube44\uc728"},"range":[0,1],"showgrid":true,"gridcolor":"rgba(0,0,0,0.1)","zeroline":false,"constrain":"domain"},"yaxis":{"title":{"text":"\ub204\uc801 \uac70\ub798 \ube44\uc728"},"range":[0,1],"showgrid":true,"gridcolor":"rgba(0,0,0,0.1)","zeroline":false,"scaleanchor":"x","scaleratio":1},"legend":{"font":{"size":10},"x":1.02,"y":0.98,"xanchor":"left","yanchor":"top","itemsizing":"constant","title":{"text":"\uad6c \uc120\ud0dd (\uba40\ud2f0 \uc140\ub809\ud2b8)"}},"margin":{"t":80,"l":60,"r":250,"b":150},"title":{"text":"\uc11c\uc6b8\uc2dc \uad6c\ubcc4 Trajectory (\ub85c\ub80c\uce20 \uace1\uc120 \uc0c1 \uc704\uce58 \uc774\ub3d9) - 2025\ub144"},"width":1400,"height":900,"plot_bgcolor":"white","paper_bgcolor":"white","hovermode":"closest","sliders":[{"active":0,"currentvalue":{"prefix":"\uc5f0\ub3c4: ","visible":true,"xanchor":"right"},"len":0.9,"pad":{"b":10,"t":50},"x":0.1,"xanchor":"left","y":-0.15,"yanchor":"top"}],"updatemenus":[{"buttons":[{"args":[],"label":"\u25b6 \uc7ac\uc0dd","method":"skip"},{"args":[],"label":"\u23f8 \uc77c\uc2dc\uc815\uc9c0","method":"skip"}],"showactive":false,"type":"buttons","x":0.05,"xanchor":"left","y":-0.15,"yanchor":"top"}]},                        {"responsive": true}                    )                };            </script>        </div>

<style>
.color-swatch {
	display: inline-block;
	width: 12px;
	height: 12px;
	margin-right: 5px;
	border-radius: 2px;
	vertical-align: middle;
}
#gu-selector {
	position: fixed;
	right: 20px;
	top: 100px;
	background: white;
	padding: 15px;
	border: 1px solid #ccc;
	border-radius: 5px;
	max-height: 600px;
	overflow-y: auto;
	font-family: Arial, sans-serif;
	font-size: 12px;
	z-index: 1000;
	box-shadow: 0 2px 10px rgba(0,0,0,0.1);
	width: 200px;
}
#gu-selector h4 {
	margin: 0 0 10px 0;
	font-size: 14px;
	color: #333;
}
.gu-item {
	padding: 5px;
	cursor: pointer;
	border-radius: 3px;
	margin-bottom: 3px;
	transition: background 0.2s;
}
.gu-item:hover {
	background: #f0f0f0;
}
.gu-item.selected {
	background: #e3f2fd;
	font-weight: bold;
}
#select-controls {
	margin-bottom: 10px;
	padding-bottom: 10px;
	border-bottom: 1px solid #ddd;
}
#select-controls button {
	font-size: 11px;
	padding: 4px 8px;
	margin-right: 5px;
	cursor: pointer;
	border: 1px solid #ccc;
	background: white;
	border-radius: 3px;
}
#select-controls button:hover {
	background: #f0f0f0;
}
</style>
<div id="gu-selector">
	<h4>üéØ Íµ¨ ÏÑ†ÌÉù</h4>
	<div id="select-controls">
		<button id="select-all">Ï†ÑÏ≤¥ÏÑ†ÌÉù</button>
		<button id="deselect-all">Ï†ÑÏ≤¥Ìï¥Ï†ú</button>
	</div>
	<div id="gu-list"></div>
</div>
<script>
(function() {
	const guList = ["\uac15\ub0a8\uad6c", "\uac15\ub3d9\uad6c", "\uac15\ubd81\uad6c", "\uac15\uc11c\uad6c", "\uad00\uc545\uad6c", "\uad11\uc9c4\uad6c", "\uad6c\ub85c\uad6c", "\uae08\ucc9c\uad6c", "\ub178\uc6d0\uad6c", "\ub3c4\ubd09\uad6c", "\ub3d9\ub300\ubb38\uad6c", "\ub3d9\uc791\uad6c", "\ub9c8\ud3ec\uad6c", "\uc11c\ub300\ubb38\uad6c", "\uc11c\ucd08\uad6c", "\uc131\ub3d9\uad6c", "\uc131\ubd81\uad6c", "\uc1a1\ud30c\uad6c", "\uc591\ucc9c\uad6c", "\uc601\ub4f1\ud3ec\uad6c", "\uc6a9\uc0b0\uad6c", "\uc740\ud3c9\uad6c", "\uc885\ub85c\uad6c", "\uc911\uad6c", "\uc911\ub791\uad6c"];
	const guColors = {"\uac15\ub0a8\uad6c": "#FD3216", "\uac15\ub3d9\uad6c": "#00FE35", "\uac15\ubd81\uad6c": "#6A76FC", "\uac15\uc11c\uad6c": "#FED4C4", "\uad00\uc545\uad6c": "#FE00CE", "\uad11\uc9c4\uad6c": "#0DF9FF", "\uad6c\ub85c\uad6c": "#F6F926", "\uae08\ucc9c\uad6c": "#FF9616", "\ub178\uc6d0\uad6c": "#479B55", "\ub3c4\ubd09\uad6c": "#EEA6FB", "\ub3d9\ub300\ubb38\uad6c": "#DC587D", "\ub3d9\uc791\uad6c": "#D626FF", "\ub9c8\ud3ec\uad6c": "#6E899C", "\uc11c\ub300\ubb38\uad6c": "#00B5F7", "\uc11c\ucd08\uad6c": "#B68E00", "\uc131\ub3d9\uad6c": "#C9FBE5", "\uc131\ubd81\uad6c": "#FF0092", "\uc1a1\ud30c\uad6c": "#22FFA7", "\uc591\ucc9c\uad6c": "#E3EE9E", "\uc601\ub4f1\ud3ec\uad6c": "#86CE00", "\uc6a9\uc0b0\uad6c": "#BC7196", "\uc740\ud3c9\uad6c": "#7E7DCD", "\uc885\ub85c\uad6c": "#FC6955", "\uc911\uad6c": "#E48F72", "\uc911\ub791\uad6c": "#2E91E5"};
	const yearsList = [2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025];
	const trajectoryData = {"\uac15\ub0a8\uad6c": [[2015, 0.88, 0.7760085995498673], [2016, 0.88, 0.7761062434562187], [2017, 0.92, 0.845080060216231], [2018, 0.68, 0.5232455650317183], [2019, 0.92, 0.8289767784246804], [2020, 0.72, 0.5608853410740203], [2021, 0.84, 0.7271052570981187], [2022, 0.96, 0.930390625], [2023, 0.92, 0.8479611050220611], [2024, 0.92, 0.8516491130820399], [2025, 0.72, 0.5760453765993933]], "\uac15\ub3d9\uad6c": [[2015, 0.84, 0.7148459807181968], [2016, 0.84, 0.7145809224665234], [2017, 0.84, 0.7183327142270621], [2018, 0.72, 0.5700346355815425], [2019, 0.88, 0.7670481161747975], [2020, 0.76, 0.6116715045960329], [2021, 0.72, 0.5754484537269441], [2022, 0.56, 0.40609375], [2023, 0.88, 0.7822274681730039], [2024, 0.88, 0.7866200110864745], [2025, 0.92, 0.8634864673645837]], "\uac15\ubd81\uad6c": [[2015, 0.24, 0.09603110618428566], [2016, 0.16, 0.05459120883157914], [2017, 0.16, 0.05305089053549434], [2018, 0.24, 0.10826412424118283], [2019, 0.12, 0.04056748979455263], [2020, 0.24, 0.10301161103047896], [2021, 0.2, 0.0841872567757386], [2022, 0.16, 0.07140625], [2023, 0.24, 0.09968243262231964], [2024, 0.16, 0.051725332594235035], [2025, 0.12, 0.034584067825065054]], "\uac15\uc11c\uad6c": [[2015, 0.96, 0.9088817225973328], [2016, 0.92, 0.8415348726143899], [2017, 0.88, 0.7762908365754951], [2018, 0.96, 0.9054287239457252], [2019, 0.76, 0.6099444555979389], [2020, 0.96, 0.9024915336236091], [2021, 0.96, 0.9084440555414834], [2022, 0.8, 0.69109375], [2023, 0.8, 0.665654947587331], [2024, 0.68, 0.5196265243902439], [2025, 0.84, 0.7413509851182981]], "\uad00\uc545\uad6c": [[2015, 0.36, 0.18912291309751755], [2016, 0.32, 0.15814367847761798], [2017, 0.4, 0.2205517214412794], [2018, 0.36, 0.21155015952230208], [2019, 0.28, 0.13439068460148565], [2020, 0.28, 0.13569182389937107], [2021, 0.32, 0.17445368088976904], [2022, 0.4, 0.250859375], [2023, 0.28, 0.12626816176263947], [2024, 0.28, 0.12120634700665188], [2025, 0.36, 0.17301627273926443]], "\uad11\uc9c4\uad6c": [[2015, 0.2, 0.07458261950351036], [2016, 0.2, 0.07560478315975093], [2017, 0.2, 0.07640423077675028], [2018, 0.12, 0.04300274353531215], [2019, 0.24, 0.10359365589239108], [2020, 0.12, 0.0376632801161103], [2021, 0.12, 0.041794275450756445], [2022, 0.2, 0.09359375], [2023, 0.2, 0.07565410448809826], [2024, 0.24, 0.09525706762749446], [2025, 0.32, 0.14434411387319976]], "\uad6c\ub85c\uad6c": [[2015, 0.76, 0.6108283785145622], [2016, 0.8, 0.661293877775941], [2017, 0.76, 0.6094742810221119], [2018, 0.84, 0.7234864002582151], [2019, 0.72, 0.5598741885832832], [2020, 0.92, 0.8341678761490082], [2021, 0.92, 0.8425633822276464], [2022, 0.92, 0.86171875], [2023, 0.48, 0.29856954163505045], [2024, 0.44, 0.2522519401330377], [2025, 0.56, 0.3755800985717883]], "\uae08\ucc9c\uad6c": [[2015, 0.12, 0.03763142866740569], [2016, 0.12, 0.03666354402013189], [2017, 0.12, 0.03478073862636611], [2018, 0.16, 0.06233163258972354], [2019, 0.16, 0.060630395502911064], [2020, 0.2, 0.07666908563134978], [2021, 0.24, 0.10691505284730697], [2022, 0.36, 0.218125], [2023, 0.12, 0.040047213557035666], [2024, 0.08, 0.021029656319290466], [2025, 0.08, 0.01940257341919392]], "\ub178\uc6d0\uad6c": [[2015, 1.0, 1.0], [2016, 1.0, 1.0], [2017, 1.0, 1.0], [2018, 1.0, 1.0], [2019, 1.0, 1.0], [2020, 1.0, 1.0], [2021, 1.0, 1.0], [2022, 1.0, 1.0], [2023, 0.96, 0.9225191805075458], [2024, 0.96, 0.9245600055432373], [2025, 1.0, 1.0]], "\ub3c4\ubd09\uad6c": [[2015, 0.6, 0.4173637004938023], [2016, 0.64, 0.46554067706324276], [2017, 0.56, 0.3789516901601204], [2018, 0.8, 0.6668280510967934], [2019, 0.56, 0.38309576390283073], [2020, 0.88, 0.7728108369617803], [2021, 0.64, 0.48456029658967925], [2022, 0.32, 0.18546875], [2023, 0.36, 0.1850321782873844], [2024, 0.36, 0.17629226718403548], [2025, 0.24, 0.09257593745128372]], "\ub3d9\ub300\ubb38\uad6c": [[2015, 0.44, 0.25641607040881453], [2016, 0.44, 0.26022666740140704], [2017, 0.44, 0.25835304698039063], [2018, 0.52, 0.3579754943949946], [2019, 0.48, 0.30439670748845615], [2020, 0.52, 0.35], [2021, 0.56, 0.3975867547838902], [2022, 0.6, 0.44890625], [2023, 0.56, 0.38372256414579997], [2024, 0.52, 0.3356430155210643], [2025, 0.6, 0.4241105155232579]], "\ub3d9\uc791\uad6c": [[2015, 0.56, 0.3741392052134771], [2016, 0.56, 0.37885968295953415], [2017, 0.52, 0.3385696690062367], [2018, 0.32, 0.17613248420294714], [2019, 0.44, 0.2674429498761962], [2020, 0.44, 0.2739477503628447], [2021, 0.4, 0.24498583830335965], [2022, 0.64, 0.491875], [2023, 0.4, 0.22016131298653852], [2024, 0.56, 0.37894955654101997], [2025, 0.64, 0.4737561607367702]], "\ub9c8\ud3ec\uad6c": [[2015, 0.52, 0.3320148476603178], [2016, 0.52, 0.33646516412262817], [2017, 0.48, 0.29820719857670724], [2018, 0.48, 0.3196280709594925], [2019, 0.52, 0.3432108679649334], [2020, 0.36, 0.203096274794388], [2021, 0.44, 0.28097727220392843], [2022, 0.48, 0.3225], [2023, 0.52, 0.3406401933507574], [2024, 0.64, 0.4704129711751663], [2025, 0.68, 0.5246729263349762]], "\uc11c\ub300\ubb38\uad6c": [[2015, 0.28, 0.12423998118848467], [2016, 0.36, 0.1902150952407193], [2017, 0.32, 0.15727580206846664], [2018, 0.28, 0.14175760058594963], [2019, 0.4, 0.23226928996854715], [2020, 0.32, 0.16889211417513306], [2021, 0.28, 0.140143228866834], [2022, 0.28, 0.15296875], [2023, 0.44, 0.25692043953573335], [2024, 0.48, 0.29242308758314856], [2025, 0.48, 0.2860740367665575]], "\uc11c\ucd08\uad6c": [[2015, 0.68, 0.508297221942289], [2016, 0.68, 0.5099649161477563], [2017, 0.8, 0.6608340339009561], [2018, 0.56, 0.39653395900835475], [2019, 0.64, 0.46890182694238103], [2020, 0.56, 0.3904692791485244], [2021, 0.8, 0.6750869274875078], [2022, 0.84, 0.745], [2023, 0.64, 0.4722479835876683], [2024, 0.84, 0.7270128880266076], [2025, 0.44, 0.24598577784173353]], "\uc131\ub3d9\uad6c": [[2015, 0.48, 0.29404749907622024], [2016, 0.48, 0.2972300288385592], [2017, 0.64, 0.46596218889909874], [2018, 0.4, 0.24729060370191056], [2019, 0.68, 0.5126547547346584], [2020, 0.48, 0.3107281083696178], [2021, 0.36, 0.20943192023395582], [2022, 0.24, 0.122734375], [2023, 0.6, 0.4277042407891409], [2024, 0.72, 0.5695849501108647], [2025, 0.88, 0.797676008202324]], "\uc131\ubd81\uad6c": [[2015, 0.8, 0.6628203836205449], [2016, 0.72, 0.5577046711118459], [2017, 0.72, 0.5613892744726192], [2018, 0.92, 0.8419053294104503], [2019, 0.8, 0.6608579267884628], [2020, 0.8, 0.6644291243347847], [2021, 0.88, 0.7816335459506758], [2022, 0.52, 0.363828125], [2023, 0.84, 0.7205407076412894], [2024, 0.8, 0.6732434866962306], [2025, 0.76, 0.6307155448429687]], "\uc1a1\ud30c\uad6c": [[2015, 0.92, 0.8388928079545837], [2016, 0.96, 0.9100126742712294], [2017, 0.96, 0.9201646170990635], [2018, 0.88, 0.7806289027100171], [2019, 0.96, 0.9060563474536573], [2020, 0.84, 0.7174649250120948], [2021, 0.76, 0.6243811453703917], [2022, 0.88, 0.80125], [2023, 1.0, 1.0], [2024, 1.0, 1.0], [2025, 0.96, 0.9306160137185068]], "\uc591\ucc9c\uad6c": [[2015, 0.72, 0.5594746212502939], [2016, 0.76, 0.6093844712624676], [2017, 0.68, 0.5133629200961896], [2018, 0.76, 0.6182016808809107], [2019, 0.84, 0.7126413705413907], [2020, 0.68, 0.5159288824383164], [2021, 0.6, 0.441015957814263], [2022, 0.44, 0.284609375], [2023, 0.68, 0.5176629289267347], [2024, 0.6, 0.4233300997782705], [2025, 0.52, 0.3303473995994772]], "\uc601\ub4f1\ud3ec\uad6c": [[2015, 0.64, 0.46200745742215055], [2016, 0.6, 0.421676677504087], [2017, 0.6, 0.42243250112416664], [2018, 0.6, 0.43767457450374286], [2019, 0.6, 0.42561734591447503], [2020, 0.6, 0.43206337687469765], [2021, 0.68, 0.5285421511962604], [2022, 0.76, 0.6384375], [2023, 0.76, 0.6147036506196779], [2024, 0.76, 0.6208945399113082], [2025, 0.8, 0.6859373313666942]], "\uc6a9\uc0b0\uad6c": [[2015, 0.16, 0.05587188014377373], [2016, 0.24, 0.09783067908377877], [2017, 0.24, 0.10054937535435687], [2018, 0.2, 0.08364679155338721], [2019, 0.2, 0.080827143143947], [2020, 0.16, 0.05615626511852927], [2021, 0.16, 0.06267989960163033], [2022, 0.12, 0.049921875], [2023, 0.16, 0.05598178905657196], [2024, 0.2, 0.07095343680709534], [2025, 0.2, 0.0698156875442194]], "\uc740\ud3c9\uad6c": [[2015, 0.32, 0.15638751721589572], [2016, 0.4, 0.2248213662497015], [2017, 0.28, 0.1279301648126063], [2018, 0.64, 0.47943589934577235], [2019, 0.36, 0.19756407682526936], [2020, 0.64, 0.473766328011611], [2021, 0.52, 0.3579800584889585], [2022, 0.72, 0.585859375], [2023, 0.72, 0.5638928701908215], [2024, 0.4, 0.21247921286031043], [2025, 0.4, 0.20845175138803948]], "\uc885\ub85c\uad6c": [[2015, 0.04, 0.00706271624844637], [2016, 0.04, 0.00764129975569883], [2017, 0.04, 0.007986470898746798], [2018, 0.04, 0.009000285526299456], [2019, 0.04, 0.00836512079234424], [2020, 0.04, 0.009651669085631349], [2021, 0.04, 0.010477352798949962], [2022, 0.04, 0.013515625], [2023, 0.04, 0.008880645251946154], [2024, 0.04, 0.007933758314855877], [2025, 0.04, 0.008226307395282465]], "\uc911\uad6c": [[2015, 0.08, 0.020255970976519197], [2016, 0.08, 0.020793152219834316], [2017, 0.08, 0.019931963479246907], [2018, 0.08, 0.024853202239519322], [2019, 0.08, 0.021923308572575788], [2020, 0.08, 0.022060957910014514], [2021, 0.08, 0.024616022290280242], [2022, 0.08, 0.029765625], [2023, 0.08, 0.024421774442851922], [2024, 0.12, 0.03604836474501109], [2025, 0.16, 0.05088079049297886]], "\uc911\ub791\uad6c": [[2015, 0.4, 0.22209345292082366], [2016, 0.28, 0.12733968883745705], [2017, 0.36, 0.18795088858042192], [2018, 0.44, 0.2831179471900488], [2019, 0.32, 0.16585692297396776], [2020, 0.4, 0.2381712626995646], [2021, 0.48, 0.3189260137702351], [2022, 0.68, 0.535078125], [2023, 0.32, 0.15319113059607115], [2024, 0.32, 0.1487319844789357], [2025, 0.28, 0.11838207960091617]]};
	
	const activeWidth = 5.0;
	const activeMarkerSize = 12;
	
	let selectedGu = new Set();
	let isAnimating = false;
	let currentYearIndex = 0;
	let animationInterval = null;
	
	function getPlotDiv() {
		return document.querySelector('.plotly-graph-div');
	}
	
	function rebuildPlot() {
		const plotDiv = getPlotDiv();
		if (!plotDiv) return;
		
		// ÏïàÎÇ¥ Î¨∏Íµ¨ Ï†úÍ±∞
		const annotations = plotDiv.layout.annotations || [];
		const newAnnotations = annotations.filter(a => a.name !== 'guide_text');
		
		// Equality lineÏùÄ Ïú†ÏßÄÌïòÍ≥†, ÎÇòÎ®∏ÏßÄÎäî Ï†úÍ±∞ ÌõÑ ÏÑ†ÌÉùÎêú Íµ¨Îßå Ï∂îÍ∞Ä
		const newData = [plotDiv.data[0]];  // Equality line
		
		// ÏÑ†ÌÉùÎêú Íµ¨Îì§Îßå trace Ï∂îÍ∞Ä
		Array.from(selectedGu).forEach((guName, idx) => {
			if (!trajectoryData[guName]) return;
			
			const traj = trajectoryData[guName];
			const years = traj.map(t => t[0]);
			const xData = traj.map(t => t[1]);
			const yData = traj.map(t => t[2]);
			
			newData.push({
				x: xData.slice(0, 1),  // Ï¥àÍ∏∞ÏóêÎäî Ï≤´ Ï†êÎßå
				y: yData.slice(0, 1),
				mode: 'lines+markers',
				name: guName,
				line: { color: guColors[guName], width: activeWidth },
				marker: { 
					size: activeMarkerSize, 
					color: guColors[guName],
					line: { width: 1, color: 'white' }
				},
				hovertemplate: `<b>${guName}</b><br>Ïó∞ÎèÑ: %{customdata[0]}<br>ÎàÑÏ†Å Íµ¨ ÎπÑÏú®: %{x:.3f}<br>ÎàÑÏ†Å Í±∞Îûò ÎπÑÏú®: %{y:.3f}<extra></extra>`,
				customdata: [[years[0]]],
				showlegend: false
			});
		});
		
		// ÌòÑÏû¨ Ïó∞ÎèÑÏùò annotation Ï∂îÍ∞Ä
		if (selectedGu.size > 0) {
			const labelAnnotations = createLabelAnnotations(currentYearIndex);
			newAnnotations.push(...labelAnnotations);
		}
		
		Plotly.react(plotDiv, newData, {
			...plotDiv.layout,
			annotations: newAnnotations,
			title: selectedGu.size > 0 
				? `ÏÑúÏö∏Ïãú Íµ¨Î≥Ñ Trajectory - ${yearsList[currentYearIndex]}ÎÖÑ (ÏÑ†ÌÉù: ${selectedGu.size}Í∞ú Íµ¨)`
				: 'ÏÑúÏö∏Ïãú Íµ¨Î≥Ñ Trajectory - Ïö∞Ï∏°ÏóêÏÑú Íµ¨Î•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî'
		});
		
		// Ïä¨ÎùºÏù¥Îçî ÏóÖÎç∞Ïù¥Ìä∏
		updateSlider();
		
		// Ï≤´ ÌîÑÎ†àÏûÑÏúºÎ°ú Î¶¨ÏÖã
		currentYearIndex = 0;
	}
	
	function createLabelAnnotations(yearIdx) {
		const annotations = [];
		const positions = [];
		
		Array.from(selectedGu).forEach((guName, idx) => {
			if (!trajectoryData[guName]) return;
			
			const traj = trajectoryData[guName];
			if (yearIdx >= traj.length) return;
			
			const x = traj[yearIdx][1];
			const y = traj[yearIdx][2];
			
			// Í≤πÏπ® Î∞©ÏßÄÎ•º ÏúÑÌïú Ïò§ÌîÑÏÖã Í≥ÑÏÇ∞
			let xOffset = 0.03;
			let yOffset = 0.03;
			
			// Ïù¥ÎØ∏ ÏûàÎäî ÎùºÎ≤®Îì§Í≥º ÎÑàÎ¨¥ Í∞ÄÍπåÏö∞Î©¥ Ï°∞Ï†ï
			positions.forEach(pos => {
				const dist = Math.sqrt(Math.pow(pos.x - x, 2) + Math.pow(pos.y - y, 2));
				if (dist < 0.08) {
					yOffset += 0.03;
					xOffset += 0.01;
				}
			});
			
			positions.push({ x, y });
			
			// ÌôîÎ©¥ Î∞ñÏúºÎ°ú ÎÇòÍ∞ÄÏßÄ ÏïäÎèÑÎ°ù Ï°∞Ï†ï
			let finalX = x + xOffset;
			let finalY = y + yOffset;
			
			if (finalX > 0.95) finalX = x - xOffset;
			if (finalY > 0.95) finalY = y - 0.05;
			if (finalY < 0.05) finalY = 0.05;
			
			annotations.push({
				x: finalX,
				y: finalY,
				xref: 'x',
				yref: 'y',
				text: guName,
				showarrow: true,
				arrowhead: 2,
				arrowsize: 1,
				arrowwidth: 1.5,
				arrowcolor: guColors[guName],
				ax: 0,
				ay: -20,
				bgcolor: guColors[guName],
				bordercolor: guColors[guName],
				borderwidth: 2,
				borderpad: 4,
				font: {
					color: 'white',
					size: 11,
					family: 'Arial, sans-serif'
				},
				opacity: 0.95
			});
		});
		
		return annotations;
	}
	
	function updateFrame(yearIdx) {
		const plotDiv = getPlotDiv();
		if (!plotDiv || selectedGu.size === 0) return;
		
		currentYearIndex = yearIdx;
		
		const updateData = [];
		
		Array.from(selectedGu).forEach((guName, idx) => {
			if (!trajectoryData[guName]) return;
			
			const traj = trajectoryData[guName];
			const pointsToShow = Math.min(yearIdx + 1, traj.length);
			
			const years = traj.slice(0, pointsToShow).map(t => t[0]);
			const xData = traj.slice(0, pointsToShow).map(t => t[1]);
			const yData = traj.slice(0, pointsToShow).map(t => t[2]);
			
			updateData.push({
				x: [xData],
				y: [yData],
				customdata: [years.map(y => [y])]
			});
		});
		
		// trace Ïù∏Îç±Ïä§ (Equality line Îã§ÏùåÎ∂ÄÌÑ∞)
		const traceIndices = Array.from({length: selectedGu.size}, (_, i) => i + 1);
		
		Plotly.restyle(plotDiv, {
			x: updateData.map(d => d.x[0]),
			y: updateData.map(d => d.y[0]),
			customdata: updateData.map(d => d.customdata[0])
		}, traceIndices).then(() => {
			// annotation ÏóÖÎç∞Ïù¥Ìä∏
			const newAnnotations = createLabelAnnotations(yearIdx);
			Plotly.relayout(plotDiv, {
				annotations: newAnnotations,
				title: `ÏÑúÏö∏Ïãú Íµ¨Î≥Ñ Trajectory - ${yearsList[yearIdx]}ÎÖÑ (ÏÑ†ÌÉù: ${selectedGu.size}Í∞ú Íµ¨)`
			});
		});
	}
	
	function playAnimation() {
		if (isAnimating) return;
		if (selectedGu.size === 0) {
			alert('Íµ¨Î•º Î®ºÏ†Ä ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî!');
			return;
		}
		
		isAnimating = true;
		
		animationInterval = setInterval(() => {
			currentYearIndex++;
			
			if (currentYearIndex >= yearsList.length) {
				stopAnimation();
				return;
			}
			
			updateFrame(currentYearIndex);
			updateSliderPosition(currentYearIndex);
		}, 500);
	}
	
	function stopAnimation() {
		isAnimating = false;
		if (animationInterval) {
			clearInterval(animationInterval);
			animationInterval = null;
		}
	}
	
	function updateSlider() {
		const plotDiv = getPlotDiv();
		if (!plotDiv) return;
		
		const steps = yearsList.map((year, idx) => ({
			label: String(year),
			method: 'skip',
			args: []
		}));
		
		Plotly.relayout(plotDiv, {
			'sliders[0].steps': steps,
			'sliders[0].active': currentYearIndex
		});
	}
	
	function updateSliderPosition(idx) {
		const plotDiv = getPlotDiv();
		if (!plotDiv) return;
		
		Plotly.relayout(plotDiv, {
			'sliders[0].active': idx
		});
	}
	
	function toggleGuSelection(guName) {
		if (selectedGu.has(guName)) {
			selectedGu.delete(guName);
		} else {
			selectedGu.add(guName);
		}
		updateGuSelector();
		currentYearIndex = 0;  // Î¶¨ÏÖã
		rebuildPlot();
	}
	
	function updateGuSelector() {
		const guListDiv = document.getElementById('gu-list');
		if (!guListDiv) return;
		
		guListDiv.innerHTML = '';
		guList.forEach(gu => {
			const item = document.createElement('div');
			item.className = 'gu-item' + (selectedGu.has(gu) ? ' selected' : '');
			
			if (selectedGu.has(gu)) {
				const swatch = document.createElement('span');
				swatch.className = 'color-swatch';
				swatch.style.backgroundColor = guColors[gu];
				item.appendChild(swatch);
			}
			
			const text = document.createTextNode(gu);
			item.appendChild(text);
			
			item.addEventListener('click', function() {
				toggleGuSelection(gu);
			});
			
			guListDiv.appendChild(item);
		});
	}
	
	window.addEventListener('load', function() {
		setTimeout(function() {
			const plotDiv = getPlotDiv();
			if (!plotDiv) {
				console.error('Plot div not found');
				return;
			}
			
			console.log('Trajectory plot loaded');
			
			// Ï¥àÍ∏∞ Íµ¨ ÏÑ†ÌÉùÍ∏∞ Î†åÎçîÎßÅ
			updateGuSelector();
			
			// Ï†ÑÏ≤¥ ÏÑ†ÌÉù/Ìï¥Ï†ú Î≤ÑÌäº
			document.getElementById('select-all').addEventListener('click', function() {
				selectedGu = new Set(guList);
				updateGuSelector();
				currentYearIndex = 0;
				rebuildPlot();
			});
			
			document.getElementById('deselect-all').addEventListener('click', function() {
				selectedGu.clear();
				updateGuSelector();
				currentYearIndex = 0;
				rebuildPlot();
			});
			
			// Ïû¨ÏÉù/ÏùºÏãúÏ†ïÏßÄ Î≤ÑÌäº
			const buttons = plotDiv.querySelectorAll('.updatemenu-button');
			if (buttons.length >= 2) {
				buttons[0].addEventListener('click', function(e) {
					e.preventDefault();
					e.stopPropagation();
					playAnimation();
				});
				
				buttons[1].addEventListener('click', function(e) {
					e.preventDefault();
					e.stopPropagation();
					stopAnimation();
				});
			}
			
			// Ïä¨ÎùºÏù¥Îçî Î≥ÄÍ≤Ω Í∞êÏßÄ
			plotDiv.on('plotly_sliderchange', function(event) {
				stopAnimation();
				const newYearIdx = event.slider.active;
				updateFrame(newYearIdx);
			});
			
		}, 1000);
	});
})();
</script>
</body>
</html>